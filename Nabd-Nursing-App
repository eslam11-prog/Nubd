import React, { useState, useEffect } from 'react';
import { 
  Globe, Menu, X, ChevronRight, ChevronLeft, 
  Activity, Shield, Users, Clock, Phone, 
  MapPin, Stethoscope, Calculator, CheckCircle,
  Facebook, Mail // تمت إضافة أيقونة فيسبوك
} from 'lucide-react';

const NabdGlobal = () => {
  // --- State Management ---
  const [lang, setLang] = useState('ar'); // 'ar' or 'en'
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const [scrolled, setScrolled] = useState(false);

  // --- Scroll Effect ---
  useEffect(() => {
    const handleScroll = () => setScrolled(window.scrollY > 20);
    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  // --- Content Dictionary (المحتوى المتغير) ---
  const content = {
    ar: {
      dir: 'rtl',
      brand: 'نبض',
      nav: {
        home: 'الرئيسية',
        services: 'خدماتنا',
        calculator: 'صحتي',
        team: 'الفريق الطبي',
        contact: 'اتصل بنا',
        book: 'حجز موعد'
      },
      hero: {
        badge: 'خدمة تمريض منزلي معتمدة',
        title: 'رعاية تمريضية عالمية في راحة منزلك',
        subtitle: 'نجمع بين الخبرة الطبية واللمسة الإنسانية. طاقم تمريض محترف جاهز لخدمتك وعائلتك في مصر على مدار الساعة.',
        cta_primary: 'اطلب ممرض الآن',
        cta_secondary: 'تعرف علينا',
        stat1: 'مريض تم شفاؤه',
        stat2: 'ساعة خدمة'
      },
      services: {
        title: 'حلول طبية متكاملة',
        s1_title: 'رعاية كبار السن',
        s1_desc: 'عناية شاملة تراعي الجانب النفسي والصحي لأحبائكم.',
        s2_title: 'عناية ما بعد الجراحة',
        s2_desc: 'متابعة الجروح والعلامات الحيوية لضمان الشفاء السريع.',
        s3_title: 'علاج طبيعي منزلي',
        s3_desc: 'جلسات إعادة تأهيل متخصصة لاستعادة الحركة.',
      },
      calculator: {
        title: 'حاسبة مؤشر كتلة الجسم (BMI)',
        desc: 'أداة مجانية لتقييم حالتك الصحية العامة.',
        weight: 'الوزن (كجم)',
        height: 'الطول (سم)',
        calcBtn: 'احسب النتيجة',
        result: 'مؤشر كتلة جسمك هو:',
        status: {
          low: 'نقص في الوزن',
          normal: 'وزن مثالي',
          high: 'زيادة في الوزن',
          obese: 'سمنة'
        }
      },
      contact_info: {
        address: 'القاهرة، مصر',
        phone: '+20 100 000 0000' // رقم افتراضي لمصر
      },
      footer: {
        desc: 'منصة نبض للرعاية الصحية المنزلية. شريكك الموثوق للصحة والعافية في مصر.',
        legal: 'إخلاء مسؤولية: المعلومات المقدمة هنا للأغراض التعليمية ولا تغني عن استشارة الطبيب.',
        rights: 'جميع الحقوق محفوظة © نبض 2025'
      }
    },
    en: {
      dir: 'ltr',
      brand: 'Nabd',
      nav: {
        home: 'Home',
        services: 'Services',
        calculator: 'My Health',
        team: 'Team',
        contact: 'Contact',
        book: 'Book Now'
      },
      hero: {
        badge: 'Certified Home Nursing',
        title: 'World-Class Nursing Care at Home',
        subtitle: 'We blend medical expertise with human touch. Professional nursing staff ready to serve you and your family in Egypt 24/7.',
        cta_primary: 'Request Nurse',
        cta_secondary: 'About Us',
        stat1: 'Patients Healed',
        stat2: 'Service Hours'
      },
      services: {
        title: 'Integrated Medical Solutions',
        s1_title: 'Elderly Care',
        s1_desc: 'Comprehensive care considering both physical and mental well-being.',
        s2_title: 'Post-Op Care',
        s2_desc: 'Wound care and vital monitoring to ensure rapid recovery.',
        s3_title: 'Home Physiotherapy',
        s3_desc: 'Specialized rehabilitation sessions to restore mobility.',
      },
      calculator: {
        title: 'BMI Health Calculator',
        desc: 'Free tool to assess your general body health status.',
        weight: 'Weight (kg)',
        height: 'Height (cm)',
        calcBtn: 'Calculate',
        result: 'Your BMI Score:',
        status: {
          low: 'Underweight',
          normal: 'Normal Weight',
          high: 'Overweight',
          obese: 'Obesity'
        }
      },
      contact_info: {
        address: 'Cairo, Egypt',
        phone: '+20 100 000 0000'
      },
      footer: {
        desc: 'Nabd Home Healthcare Platform. Your trusted partner for health and wellness in Egypt.',
        legal: 'Disclaimer: Information provided is for educational purposes and does not replace medical advice.',
        rights: 'All Rights Reserved © Nabd 2025'
      }
    }
  };

  const t = content[lang]; // Shortcut for current language content

  // --- Utility Components ---
  
  const BMICalculator = () => {
    const [weight, setWeight] = useState('');
    const [height, setHeight] = useState('');
    const [bmi, setBmi] = useState(null);
    const [status, setStatus] = useState('');

    const calculateBMI = () => {
      if (weight && height) {
        const hInMeters = height / 100;
        const result = (weight / (hInMeters * hInMeters)).toFixed(1);
        setBmi(result);
        
        if (result < 18.5) setStatus(t.calculator.status.low);
        else if (result < 25) setStatus(t.calculator.status.normal);
        else if (result < 30) setStatus(t.calculator.status.high);
        else setStatus(t.calculator.status.obese);
      }
    };

    return (
      <div className="bg-white p-8 rounded-2xl shadow-xl border border-slate-100 relative overflow-hidden group">
        <div className="absolute top-0 right-0 w-32 h-32 bg-teal-50 rounded-bl-full -z-0 transition-transform group-hover:scale-110"></div>
        <div className="relative z-10">
          <div className="flex items-center gap-3 mb-6">
            <div className="bg-teal-100 p-2 rounded-lg text-teal-700">
              <Calculator size={24} />
            </div>
            <h3 className="text-xl font-bold text-slate-800">{t.calculator.title}</h3>
          </div>
          <p className="text-slate-500 mb-6 text-sm">{t.calculator.desc}</p>
          
          <div className="grid grid-cols-2 gap-4 mb-4">
            <div className="space-y-1">
              <label className="text-xs font-bold text-slate-700">{t.calculator.weight}</label>
              <input 
                type="number" 
                value={weight}
                onChange={(e) => setWeight(e.target.value)}
                className="w-full p-3 bg-slate-50 rounded-lg border border-slate-200 focus:border-teal-500 outline-none text-center font-mono"
              />
            </div>
            <div className="space-y-1">
              <label className="text-xs font-bold text-slate-700">{t.calculator.height}</label>
              <input 
                type="number" 
                value={height}
                onChange={(e) => setHeight(e.target.value)}
                className="w-full p-3 bg-slate-50 rounded-lg border border-slate-200 focus:border-teal-500 outline-none text-center font-mono"
              />
            </div>
          </div>

          <button 
            onClick={calculateBMI}
            className="w-full bg-slate-900 text-white py-3 rounded-lg font-bold hover:bg-slate-800 transition mb-6"
          >
            {t.calculator.calcBtn}
          </button>

          {bmi && (
            <div className="bg-teal-50 p-4 rounded-xl text-center border border-teal-100 animate-in fade-in slide-in-from-bottom-2">
              <div className="text-sm text-slate-500 mb-1">{t.calculator.result}</div>
              <div className="text-3xl font-bold text-teal-700 font-mono">{bmi}</div>
              <div className={`text-sm font-bold mt-1 ${status === t.calculator.status.normal ? 'text-green-600' : 'text-orange-500'}`}>
                {status}
              </div>
            </div>
          )}
        </div>
      </div>
    );
  };

  return (
    <div dir={t.dir} className={`min-h-screen bg-slate-50 font-sans selection:bg-teal-200 ${lang === 'ar' ? 'font-arabic' : 'font-english'}`}>
      
      {/* --- Top Navigation --- */}
      <nav className={`fixed w-full z-50 transition-all duration-300 ${scrolled ? 'bg-white/95 backdrop-blur shadow-md py-3' : 'bg-transparent py-5'}`}>
        <div className="max-w-7xl mx-auto px-6 flex justify-between items-center">
          {/* Brand */}
          <div className="flex items-center gap-2">
            <div className="w-10 h-10 bg-teal-600 rounded-lg flex items-center justify-center text-white shadow-lg shadow-teal-600/20">
              <Activity size={24} />
            </div>
            <span className="text-2xl font-extrabold text-slate-900 tracking-tight">{t.brand}</span>
          </div>

          {/* Desktop Menu */}
          <div className="hidden md:flex items-center gap-8 text-sm font-medium text-slate-600">
            {Object.keys(t.nav).filter(k => k !== 'book').map(key => (
              <a key={key} href={`#${key}`} className="hover:text-teal-600 transition-colors">
                {t.nav[key]}
              </a>
            ))}
          </div>

          {/* Actions & Lang Switch */}
          <div className="hidden md:flex items-center gap-4">
            <button 
              onClick={() => setLang(lang === 'ar' ? 'en' : 'ar')}
              className="flex items-center gap-2 px-3 py-2 rounded-full hover:bg-slate-100 transition text-sm font-bold text-slate-700"
            >
              <Globe size={16} />
              {lang === 'ar' ? 'English' : 'العربية'}
            </button>
            <button className="bg-slate-900 text-white px-6 py-2.5 rounded-full text-sm font-bold hover:bg-slate-800 transition shadow-xl shadow-slate-900/10">
              {t.nav.book}
            </button>
          </div>

          {/* Mobile Toggle */}
          <button className="md:hidden text-slate-800" onClick={() => setIsMenuOpen(!isMenuOpen)}>
            {isMenuOpen ? <X /> : <Menu />}
          </button>
        </div>

        {/* Mobile Menu */}
        {isMenuOpen && (
          <div className="md:hidden absolute top-full left-0 w-full bg-white border-b border-slate-100 p-6 flex flex-col gap-4 shadow-xl">
             {Object.keys(t.nav).map(key => (
              <a key={key} href="#" className="text-slate-700 font-medium py-2 border-b border-slate-50 last:border-0">
                {t.nav[key]}
              </a>
            ))}
            <div className="flex justify-between items-center pt-2">
              <button 
                onClick={() => { setLang(lang === 'ar' ? 'en' : 'ar'); setIsMenuOpen(false); }}
                className="flex items-center gap-2 text-sm font-bold text-teal-600"
              >
                <Globe size={16} /> Change Language
              </button>
            </div>
          </div>
        )}
      </nav>

      {/* --- Hero Section --- */}
      <header className="relative pt-32 pb-24 lg:pt-48 lg:pb-32 overflow-hidden">
        {/* Abstract Background Shapes */}
        <div className="absolute top-0 left-0 w-full h-full -z-10">
          <div className={`absolute top-0 w-2/3 h-full bg-gradient-to-br from-teal-50 to-white ${lang === 'ar' ? 'left-0 rounded-r-[100px]' : 'right-0 rounded-l-[100px]'}`} />
          <div className="absolute bottom-0 left-1/2 -translate-x-1/2 w-[800px] h-[800px] bg-blue-50/50 rounded-full blur-3xl" />
        </div>

        <div className="max-w-7xl mx-auto px-6 grid lg:grid-cols-2 gap-16 items-center">
          <div className="space-y-8 animate-in slide-in-from-bottom-8 duration-700">
            <div className="inline-flex items-center gap-2 px-4 py-2 bg-white rounded-full shadow-sm border border-teal-100 text-teal-800 text-xs font-bold tracking-wide">
              <Shield size={14} className="text-teal-600" />
              {t.hero.badge}
            </div>
            
            <h1 className="text-5xl lg:text-7xl font-extrabold text-slate-900 leading-[1.15]">
              {t.hero.title}
            </h1>
            
            <p className="text-lg text-slate-500 leading-relaxed max-w-lg">
              {t.hero.subtitle}
            </p>

            <div className="flex flex-wrap gap-4 pt-2">
              <button className="px-8 py-4 bg-teal-600 text-white rounded-xl font-bold hover:bg-teal-700 transition shadow-lg shadow-teal-600/20 flex items-center gap-2">
                {t.hero.cta_primary}
                {lang === 'ar' ? <ChevronLeft size={18} /> : <ChevronRight size={18} />}
              </button>
              <button className="px-8 py-4 bg-white text-slate-700 border border-slate-200 rounded-xl font-bold hover:bg-slate-50 transition">
                {t.hero.cta_secondary}
              </button>
            </div>

            <div className="flex gap-12 border-t border-slate-200 pt-8 opacity-80">
              <div>
                <div className="text-3xl font-bold text-slate-900 font-mono">+1,200</div>
                <div className="text-xs font-bold text-slate-500 uppercase tracking-wider">{t.hero.stat1}</div>
              </div>
              <div>
                <div className="text-3xl font-bold text-slate-900 font-mono">24/7</div>
                <div className="text-xs font-bold text-slate-500 uppercase tracking-wider">{t.hero.stat2}</div>
              </div>
            </div>
          </div>

          {/* Interactive Utility Section */}
          <div className="relative lg:h-[500px] flex items-center justify-center">
            {/* Decorative circles */}
            <div className="absolute inset-0 bg-gradient-to-tr from-teal-200/20 to-blue-200/20 rounded-full blur-3xl animate-pulse" />
            
            <div className="relative w-full max-w-md z-10">
              {/* Floating Cards Effect */}
              <div className={`absolute -top-12 ${lang === 'ar' ? '-left-8' : '-right-8'} bg-white p-4 rounded-xl shadow-lg border border-slate-100 flex items-center gap-3 animate-bounce-slow z-20`}>
                <div className="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center text-green-600">
                  <CheckCircle size={20} />
                </div>
                <div>
                  <div className="text-sm font-bold text-slate-900">{lang === 'ar' ? 'مرخصون 100%' : '100% Licensed'}</div>
                  <div className="text-xs text-slate-500">{lang === 'ar' ? 'طاقم معتمد' : 'Verified Staff'}</div>
                </div>
              </div>

              {/* The Calculator Component */}
              <BMICalculator />
            </div>
          </div>
        </div>
      </header>

      {/* --- Services Section --- */}
      <section className="py-24 bg-white">
        <div className="max-w-7xl mx-auto px-6">
          <div className="text-center max-w-2xl mx-auto mb-16">
            <h2 className="text-3xl font-bold text-slate-900 mb-4">{t.services.title}</h2>
            <div className="h-1 w-20 bg-teal-500 mx-auto rounded-full"></div>
          </div>

          <div className="grid md:grid-cols-3 gap-8">
            {[
              { icon: <Users />, title: t.services.s1_title, desc: t.services.s1_desc },
              { icon: <Stethoscope />, title: t.services.s2_title, desc: t.services.s2_desc },
              { icon: <Activity />, title: t.services.s3_title, desc: t.services.s3_desc },
            ].map((service, i) => (
              <div key={i} className="group p-8 bg-slate-50 rounded-2xl hover:bg-white hover:shadow-xl hover:-translate-y-1 transition-all duration-300 border border-slate-100">
                <div className="w-14 h-14 bg-white rounded-xl shadow-sm flex items-center justify-center text-teal-600 mb-6 group-hover:bg-teal-600 group-hover:text-white transition-colors">
                  {React.cloneElement(service.icon, { size: 28 })}
                </div>
                <h3 className="text-xl font-bold text-slate-900 mb-3">{service.title}</h3>
                <p className="text-slate-500 leading-relaxed text-sm">{service.desc}</p>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* --- Footer (Updated) --- */}
      <footer className="bg-slate-900 text-slate-400 py-16">
        <div className="max-w-7xl mx-auto px-6 grid md:grid-cols-4 gap-12">
          <div className="col-span-1 md:col-span-2">
            <div className="flex items-center gap-2 mb-6 text-white">
              <Activity />
              <span className="text-2xl font-bold">{t.brand}</span>
            </div>
            <p className="max-w-xs leading-relaxed opacity-80 mb-6">
              {t.footer.desc}
            </p>
            {/* Social Media Links */}
            <div className="flex gap-4">
              <a 
                href="https://www.facebook.com/share/17Qjir6tPn/" 
                target="_blank" 
                rel="noopener noreferrer"
                className="w-10 h-10 rounded-full bg-blue-600 hover:bg-blue-700 transition flex items-center justify-center text-white cursor-pointer shadow-lg shadow-blue-900/50"
              >
                <Facebook size={20} />
              </a>
              <a href="#" className="w-10 h-10 rounded-full bg-slate-800 hover:bg-teal-600 transition flex items-center justify-center text-white cursor-pointer">
                <Mail size={20} />
              </a>
            </div>
          </div>

          <div>
            <h4 className="text-white font-bold mb-6">{t.nav.contact}</h4>
            <ul className="space-y-4 text-sm">
              <li className="flex items-center gap-3 hover:text-white transition cursor-pointer">
                <Phone size={16} /> {t.contact_info.phone}
              </li>
              <li className="flex items-center gap-3 hover:text-white transition cursor-pointer">
                <MapPin size={16} /> {t.contact_info.address}
              </li>
              <li className="flex items-center gap-3 hover:text-white transition cursor-pointer">
                <Clock size={16} /> 24/7 Support
              </li>
            </ul>
          </div>
          
          <div>
             <div className="bg-slate-800 p-4 rounded-xl text-xs text-slate-400 leading-relaxed border border-slate-700">
               <Shield size={16} className="mb-2 text-teal-500" />
               {t.footer.legal}
             </div>
          </div>
        </div>
        
        <div className="max-w-7xl mx-auto px-6 mt-16 pt-8 border-t border-slate-800 text-center text-xs opacity-60 flex flex-col md:flex-row justify-between items-center">
          <span>{t.footer.rights}</span>
          <div className="flex gap-4 mt-4 md:mt-0">
            <span>Privacy Policy</span>
            <span>Terms of Service</span>
          </div>
        </div>
      </footer>
    </div>
  );
};

export default NabdGlobal;


